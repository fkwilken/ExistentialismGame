<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html>
 <head>
    <title>Existentialism</title>
</head>
 <body>
    <p align="center">
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas>
    </p>
 </body>

 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>

 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(800, 800);
        frameRate(60);

        var canvas = document.getElementById('mycanvas');
        var ctx = canvas.getContext('2d');






        // ProgramCodeGoesHere
      var fuentes = new Image();
      fuentes.src = 'fuentes.png';
      var karen = new Image();
      karen.src = 'karen.png';
      var cisco = new Image();
      cisco.src = 'cisco.png';
      var afza = new Image();
      afza.src = 'afza.png';
      var heye = new Image();
      heye.src = 'heye.png';
      var hbeam = new Image();
      hbeam.src = 'hbeam.png';
      var veye = new Image();
      veye.src = 'veye.png';
      var vbeam = new Image()
      vbeam.src = 'vbeam.png';
      var back = new Image();
      back.src = 'background.png';


      var player = fuentes;


      var mousePosX = mouseX;
      var t = 0;
      var stage = 0;

var drawPlayer = function() {
  ctx.drawImage(player, mouseX - 50, mouseY - 50, 100, 100);
};

var rand;
var beamtime = 0;
var xPos;
var xWid;
var yPos;
var yWid;
var eye;
var laser;
var beam = function(warn, fire) {
  if (beamtime === 0) {
    rand = floor(random(0, 16))
    if (rand <= 8) {
      eye = veye;
      laser = vbeam;
      xPos = (rand * 100);
      yPos = 0;
      xWid = 100;
      yWid = 800;
    } else {
      eye = heye;
      laser = hbeam;
      yPos = ((rand - 8) * 100);
      xPos = 0;
      xWid = 800;
      yWid = 100;
      }
      beamtime = 1
  } else if (beamtime > 0 && beamtime <= warn){
        ctx.drawImage(eye, xPos, yPos, xWid, yWid);
        beamtime ++;
  } else if (beamtime > warn && beamtime < fire) {
      ctx.drawImage(laser, xPos, yPos, xWid, yWid);
      if (mouseX > xPos - 50 && mouseX < xPos + 50 + xWid && mouseY > yPos - 50 && mouseY < yPos + 50 + yWid ) {
        stage = -1;
      }
      beamtime ++;
  } else if (beamtime === fire) {
    beamtime = 0;
  }

};




var rand2;
var beamtime2 = 0;
var xPos2;
var xWid2;
var yPos2;
var yWid2;
var eye2;
var laser2;
var beam2 = function(warn2, fire2) {
  if (beamtime2 === 0) {
    rand2 = floor(random(0, 16))
    if (rand2 <= 8) {
      eye2 = veye;
      laser2 = vbeam;
      xPos2 = (rand2 * 100);
      yPos2 = 0;
      xWid2 = 100;
      yWid2 = 800;
    } else {
      eye2 = heye;
      laser2 = hbeam;
      yPos2 = ((rand2 - 8) * 100);
      xPos2 = 0;
      xWid2 = 800;
      yWid2 = 100;
      }
      beamtime2 = 1
  } else if (beamtime2 > 0 && beamtime2 <= warn2){
        ctx.drawImage(eye2, xPos2, yPos2, xWid2, yWid2);
        beamtime2 ++;
  } else if (beamtime2 > warn2 && beamtime2 < fire2) {
      ctx.drawImage(laser2, xPos2, yPos2, xWid2, yWid2);
      if (mouseX > xPos2 - 50 && mouseX < xPos2 + 50 + xWid2 && mouseY > yPos2 - 50 && mouseY < yPos2 + 50 + yWid2 ) {
        stage = -1;
      }
      beamtime2 ++;
  } else if (beamtime2 === fire2){
    beamtime2 = 0;
  }

};




draw = function() {
  if (stage === 0 - 1) {
    beamtime = 0;
    beamtime2 = 0;
    background(0, 0, 0);
    textSize(45);
    fill(255, 0, 0);
    text(" The Gaze of the Other is Inescapable!", 0, 50);
    text(" You Were Objectified and You Hate It!", 0, 400);
    text("     Score:  " + t, 200, 790);

  }
  if (stage === 0 ){
    t = 0;
    background(0, 0, 0);
    textSize(50);
    text("   EXISTENTIALISM:", 150, 55);
    text("    The Death Stare", 150, 110);
    text("    Pick Your Player", 150, 800 - 55);
    ctx.drawImage(fuentes, 100 - 50, 400, 100, 100);
    ctx.drawImage(karen, 300 - 50, 400, 100, 100);
    ctx.drawImage(cisco, 500 - 50, 400, 100, 100);
    ctx.drawImage(afza, 700 - 50, 400, 100, 100);
    mousePressed = function() {
      if (stage === 0 - 1) {
        stage = 0;
      } else if (mouseX > 0 && mouseX < 200 && stage === 0){
        player = fuentes;
        stage = 1;
      } else if (mouseX > 200 && mouseX < 400 && stage === 0){
        player = karen;
            stage = 1;
      } else if (mouseX > 400 && mouseX < 600 && stage === 0) {
        player = cisco;
            stage = 1;
      } else if (mouseX > 600 && mouseX < 800 && stage === 0) {
        player = afza;
            stage = 1;
      }
    }
  }
  if (stage === 1 && t < 200) {
        ctx.drawImage(back, 0, 0, 800, 800);
        fill(255, 255, 255);
        textSize(20);
        text("Score: " + t, 30, 30);
        textSize(50);
        text("Avoid the Gaze of the Other!", 100, 100);
        drawPlayer();
        t++;
}else if (stage === 1 && t < 600) {
      ctx.drawImage(back, 0, 0, 800, 800);
      textSize(20);
      fill(255, 255, 255);
      text("Score: " + t, 30, 30);
      beam(60, 100);
      drawPlayer();
      t++;
}else if (stage === 1 && t < 900) {
      ctx.drawImage(back, 0, 0, 800, 800);
      beam(60, 100);
      beam2(60, 100);
      drawPlayer();
      textSize(20);
      fill(255, 255, 255);
      text("Score: " + t, 30, 30);
      t++;

} else if (stage ===1 && t === 900) {
  beamtime = 0;
  beamtime2 = 0;
  t++;
} else if (stage === 1 && t > 900) {
      ctx.drawImage(back, 0, 0, 800, 800);
      beam(30, 60);
      beam2(30, 60);
      drawPlayer();
      textSize(20);
      fill(255, 255, 255);
      text("Score: " + t, 30, 30);
      t++;

}


};
    }};





























    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas");
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc);
 </script>

</html>
